<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0029)http://www.ssp.sp.gov.br/nbo/ -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>POC-HapVida</title>
<meta http-equiv="x-ua-compatible" content="IE=8" />
<link rel="Stylesheet" title="padrao" type="text/css" href="./images/960.css" />
<link rel="Stylesheet" title="padrao" type="text/css" href="./images/DE.css" />
<link rel="stylesheet" title="padrao" type="text/css" href="./images/barrasp_media.css" media="all" />
<link rel="stylesheet" type="text/css" href="./images/thickbox.css" media="all" />
<link href="resources/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css" />

<script type="text/javascript" src="./images/jsDE.js.download"></script>
<script type="text/javascript" src="./images/thickbox.js.download"></script>
<script type="text/javascript">
        $(document).ready(function () {
            mascara($(".cep"), "cep");
            mascara($(".cpf"), "cpf");
            mascara($(".data"), "data");
            mascara($(".tel"), "telefone");
            mascara($(".ano"), "ano");
            mascara($(".float"), "float");
            mascara($(".placa"), "placa");
        });
    </script>
<script type="text/javascript" src="./images/ScriptsReduzidos.js.download"></script>
<style>
.chat-window {
	bottom: 0;
	position: fixed;
	float: right;
	left: 70%;
}

.icon_minim {
	padding: 2px 10px;
}

.col-md-2, .col-md-10 {
	padding: 0;
}

.msg_container_base {
	background: #e5e5e5;
	margin: 0;
	padding: 0 10px 0;
	max-height: 400px;
	overflow-x: hidden;
}

.top-bar {
	background: #666;
	color: white;
	padding: 10px;
	position: relative;
	overflow: hidden;
}

.msg_receive {
	padding-left: 0;
	margin-left: 0;
}

.msg_sent {
	padding-bottom: 15px !important;
	margin-right: 0;
}

.messages {
	background: white;
	padding: 10px;
	border-radius: 2px;
	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
	max-width: 100%;
}

.messages>p {
	font-size: 13px;
	margin: 0 0 0.2rem 0;
}

.messages>time {
	font-size: 11px;
	color: #ccc;
}

.msg_container {
	padding: 10px;
	overflow: hidden;
	display: flex;
}

.avatar {
	position: relative;
}

.base_receive>.avatar:after {
	content: "";
	position: absolute;
	top: 0;
	right: 0;
	width: 0;
	height: 0;
	border: 5px solid #FFF;
	border-left-color: rgba(0, 0, 0, 0);
	border-bottom-color: rgba(0, 0, 0, 0);
}

.base_sent {
	justify-content: flex-end;
	align-items: flex-end;
}

.base_sent>.avatar:after {
	content: "";
	position: absolute;
	bottom: 0;
	left: 0;
	width: 0;
	height: 0;
	border: 5px solid white;
	border-right-color: transparent;
	border-top-color: transparent;
	box-shadow: 1px 1px 2px rgba(black, 0.2);
}

.msg_sent>time {
	float: right;
}
</style>

<script type="text/javascript">
        function ExibeErro() {
            $(document).ready(function () {
                $("#pnlErro").dialog({
                    height: 200,
                    width: 500,
                    buttons: {
                        Ok: function () {
                            $(this).dialog("close");
                        }
                    },
                    modal: true
                });
            });
        };
</script>
<style id="style-1-cropbar-clipper">
.en-markup-crop-options {
	top: 18px !important;
	left: 50% !important;
	margin-left: -100px !important;
	width: 200px !important;
	border: 2px rgba(255, 255, 255, .38) solid !important;
	border-radius: 4px !important;
}

.en-markup-crop-options div div:first-of-type {
	margin-left: 0px !important;
}
</style>
</head>
<body data-feedly-mini="yes">

	<form>
		<div class="container">
			<div class="row chat-window col-xs-5 col-md-4" id="chat_window_1"">
				<div class="col-xs-12 col-md-12">
					<div class="panel panel-default">
						<div class="panel-heading top-bar">
							<div class="col-md-8 col-xs-8">
								Chat - Watson
							</div>
							<div class="col-md-4 col-xs-4" style="text-align: right;">
								<a href="#"><span id="minim_chat_window" class="glyphicon glyphicon-minus icon_minim" /></a>
							</div>
						</div>
						<div class="panel-body msg_container_base" id="result"></div>
						<div class="panel-footer">
							<div class="input-group">
								<input id="btn-input" type="text" class="form-control input-sm chat_input" /> <span class="input-group-btn">
									<button type="button" class="btn btn-primary btn-sm" id="btn-chat">Send</button>
								</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</form>

	<script src="http://maps.google.com/maps/api/js?key=AIzaSyAIzJRyC7E8gDpzfyaQIFOW_bxvpDnP7lM"></script>
	<script type="text/javascript" src="resources/js/jquery-1.10.2.min.js"></script>
	<script src="resources/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="resources/js/command.js"></script>
	<script type="text/javascript" src="resources/js/main.js"></script>
	<script type="text/javascript">
		var conversation_id="000";

		$(document).ready(function() {$('#btn-chat').click(function(event) {
			conversation(event);
		
		});}); 

		$(document).ready(function() {$('.chat_input').keypress(function(event){
			var code = (event.keyCode ? event.keyCode : event.which);
			if (code == 13){
		    	conversation(event);
		    }
		});});
		
		function conversation(event) {
			event.preventDefault();
			
			var result = $('#result'), name = $.trim($('#btn-input').val());
			var chatresult = document.getElementById("result");
			result.removeClass('invalid');

			$('#btn-input').val("");
			$('#btn-input').focus();
			
			if (!name || !name.length) {
				result.addClass('invalid').text('A name is required!');
				return;
			}

			var d = new Date();
			var timeNow = d.toLocaleTimeString();

			chatresult.innerHTML += ' <div class="row msg_container base_sent">'
					+ '	<div class="col-md-10 col-xs-10">'
					+ '		<div class="messages msg_sent">'
					+ '			<p>'
					+ name
					+ '</p>'
					+ '	  		<time datetime="2009-11-13T20:00">'
					+ timeNow
					+ '</time>'
					+ '	  	</div> '
					+ '	</div> '
					+ '	<div class="col-md-2 col-xs-2 avatar"> '
					+ '		<img src="resources/img/Avatar-1.jpg" class=" img-responsive "> '
					+ '	</div> '
					+ ' </div> ';
			chatresult.scrollTop = chatresult.scrollHeight;
					
			$.ajax({
				type : 'GET',
				url : 'chat/hapvida/json/' + name + '/' + conversation_id,
				contentType : 'application/json',
				dataType : 'json',
				data : JSON.stringify(name),
				success : function(data) {
					var d = new Date();
					var timeNow = d.toLocaleTimeString();
					
					chatresult.innerHTML += ' <div class="row msg_container base_sent">'
							+ '	<div class="col-md-2 col-xs-2 avatar"> '
							+ '		<img src="resources/img/Watson.gif" class=" img-responsive "> '
							+ '	</div> '
							+ '	<div class="col-md-10 col-xs-10">'
							+ '		<div class="messages msg_sent">'
							+ '			<p> '
							+ data.result
							+ '</p>'
							+ '	  		<time datetime="2009-11-13T20:00">'
							+ timeNow
							+ '</time>'
							+ '	  	</div> '
							+ '	</div> '
							+ ' </div> ';
							
					chatresult.scrollTop = chatresult.scrollHeight;
					conversation_id = data.conversation_id;

				}
			}).error(function() {});							
		}

		function getLocation() {
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(showPosition, showError);
			} else {
				alert("Geolocalização não é suportada nesse browser.");
			}
		}

		function showPosition(position) {
			lat = position.coords.latitude;
			lon = position.coords.longitude;
			latlon = new google.maps.LatLng(lat, lon)
			mapholder = document.getElementById('mapholder')
			
			mapholder.style.height = '200px';
			mapholder.style.width = '250px';

			var myOptions = {
				center : latlon,
				zoom : 12,
				mapTypeId : google.maps.MapTypeId.ROADMAP,
				mapTypeControl : false,
				navigationControlOptions : {
					style : google.maps.NavigationControlStyle.SMALL
				}
			};
			var map = new google.maps.Map(mapholder, myOptions);
			var marker = new google.maps.Marker({
				position : latlon,
				map : map,
				title : "Você está Aqui!",
				icon: 'http://maps.google.com/mapfiles/ms/icons/green-dot.png'
			});
			
		    $.getJSON("./resources/json/pontosDP.json", function(pontos) {
		        $.each(pontos, function(index, ponto) {
		            var marker = new google.maps.Marker({
		                position: new google.maps.LatLng(ponto.Latitude, ponto.Longitude),
		                title: ponto.name,
		                map: map
		            });
		 
		        });
		 
		    });

		}

		function showError(error) {
			switch (error.code) {
			case error.PERMISSION_DENIED:
				x.innerHTML = "Usuário rejeitou a solicitação de Geolocalização."
				break;
			case error.POSITION_UNAVAILABLE:
				x.innerHTML = "Localização indisponível."
				break;
			case error.TIMEOUT:
				x.innerHTML = "O tempo da requisição expirou."
				break;
			case error.UNKNOWN_ERROR:
				x.innerHTML = "Algum erro desconhecido aconteceu."
				break;
			}
		}
		</script>
</body>

</html>